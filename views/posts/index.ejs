<% layout('layouts/boilerplate') -%>

<% include ../partials/paginate-posts %>

<h1>Posts Index!</h1>
<div id="map"></div>

<% posts.docs.forEach(post => { %>
  <div>
    <h2><%= post.title %></h2>
    <p><%= post.price %></p>
    <p><%= post.description %></p>
    <p><%= post.location %></p>
    <div>
      <a href="/posts/<%= post.id %>/">View More</a>
    </div>
  </div>
<% }); %>

<% include ../partials/paginate-posts %>

<script>
	mapboxgl.accessToken = '<%= mapBoxToken %>';
	var posts = { features: <%- JSON.stringify(posts.docs) %> };
</script>
<script src="/javascripts/allPostsClusterMap.js"></script>